{{template "admin_base" .}}

{{define "title"}}{{if .IsNew}}Nový článok{{else}}Upraviť článok{{end}} - Charon Administrácia{{end}}

{{define "content"}}
<h1 class="admin-title">{{if .IsNew}}Nový článok{{else}}Upraviť článok{{end}}</h1>
<p class="admin-subtitle">{{if .IsNew}}Vytvorte nový článok, ktorý sa zobrazí na verejnom webe. Článok sa návštevníkom zobrazí až po zaškrtnutí „Publikované".{{else}}Upravte existujúci článok. Zmeny sa prejavia ihneď po uložení.{{end}}</p>

{{if .Error}}
<div class="alert alert-error">{{.Error}}</div>
{{end}}

<div class="admin-card">
    <form method="POST" action="{{if .IsNew}}/admin/articles{{else}}/admin/articles/{{.Article.ID}}{{end}}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Názov článku</label>
            <span class="form-hint">Hlavný nadpis článku, ktorý sa zobrazí návštevníkom na webe.</span>
            <input type="text" id="title" name="title" value="{{.Article.Title}}" required>
        </div>

        <div class="form-group">
            <label for="excerpt">Krátky popis (úryvok)</label>
            <span class="form-hint">Voliteľné. Krátky text, ktorý sa zobrazí v zozname článkov ako náhľad. Ak necháte prázdne, zobrazí sa začiatok článku.</span>
            <input type="text" id="excerpt" name="excerpt" value="{{.Article.Excerpt}}">
        </div>

        <div class="form-group">
            <label for="content">Obsah článku</label>
            <span class="form-hint">Hlavný text článku. Píšte priamo, text sa zobrazí tak ako ho napíšete.</span>
            <textarea id="content" name="content">{{.Article.Content}}</textarea>
        </div>

        <div class="form-group">
            <label for="cover_image">Titulný obrázok</label>
            <span class="form-hint">Voliteľné. Hlavný obrázok článku, ktorý sa zobrazí v zozname a na vrchu článku. Podporované formáty: JPG, PNG, GIF.</span>
            {{if .Article.CoverImage}}
            <p style="margin-bottom: 0.5rem; color: var(--text-muted); font-size: 0.85rem;">Aktuálny obrázok: {{.Article.CoverImage}}</p>
            {{end}}
            <input type="file" id="cover_image" name="cover_image" accept="image/*">
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="published" {{if .Article.Published}}checked{{end}} style="width: auto; min-height: auto; min-width: 20px; height: 20px;">
                Publikované
            </label>
            <span class="form-hint">Ak je zaškrtnuté, článok je viditeľný pre všetkých návštevníkov webu. Ak nie, článok je skrytý.</span>
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="comments_enabled" {{if or .IsNew .Article.CommentsEnabled}}checked{{end}} style="width: auto; min-height: auto; min-width: 20px; height: 20px;">
                Povoliť komentáre
            </label>
            <span class="form-hint">Ak je zaškrtnuté, návštevníci môžu pod článkom pridávať komentáre. Komentáre musíte potom schváliť v sekcii „Komentáre".</span>
        </div>

        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; margin-top: 1.5rem;">
            <button type="submit" class="btn">{{if .IsNew}}Vytvoriť článok{{else}}Uložiť článok{{end}}</button>
            <a href="/admin/articles" style="color: var(--text-muted);">Zrušiť a vrátiť sa späť</a>
        </div>
    </form>
</div>
{{end}}
