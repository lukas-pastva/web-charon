{{template "admin_base" .}}

{{define "title"}}{{if .IsNew}}Nový článok{{else}}Upraviť článok{{end}} - Charon Administrácia{{end}}

{{define "content"}}
<h1 class="admin-title">{{if .IsNew}}Nový článok{{else}}Upraviť článok{{end}}</h1>

{{if .Error}}
<div class="alert alert-error">{{.Error}}</div>
{{end}}

<div class="admin-card">
    <form method="POST" action="{{if .IsNew}}/admin/articles{{else}}/admin/articles/{{.Article.ID}}{{end}}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Názov</label>
            <input type="text" id="title" name="title" value="{{.Article.Title}}" required>
        </div>

        <div class="form-group">
            <label for="excerpt">Úryvok</label>
            <input type="text" id="excerpt" name="excerpt" value="{{.Article.Excerpt}}">
        </div>

        <div class="form-group">
            <label for="content">Obsah</label>
            <textarea id="content" name="content">{{.Article.Content}}</textarea>
        </div>

        <div class="form-group">
            <label for="cover_image">Titulný obrázok</label>
            {{if .Article.CoverImage}}
            <p style="margin-bottom: 0.5rem; color: var(--text-muted);">Aktuálny: {{.Article.CoverImage}}</p>
            {{end}}
            <input type="file" id="cover_image" name="cover_image" accept="image/*">
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="published" {{if .Article.Published}}checked{{end}} style="width: auto;">
                Publikované
            </label>
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="comments_enabled" {{if or .IsNew .Article.CommentsEnabled}}checked{{end}} style="width: auto;">
                Povoliť komentáre
            </label>
        </div>

        <button type="submit" class="btn">{{if .IsNew}}Vytvoriť článok{{else}}Uložiť článok{{end}}</button>
        <a href="/admin/articles" style="margin-left: 1rem; color: var(--text-muted);">Zrušiť</a>
    </form>
</div>
{{end}}
