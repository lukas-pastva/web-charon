{{template "admin_base" .}}

{{define "title"}}{{if .IsNew}}Nový článek{{else}}Upravit článek{{end}} - Charon Administrace{{end}}

{{define "content"}}
<h1 class="admin-title">{{if .IsNew}}Nový článek{{else}}Upravit článek{{end}}</h1>

{{if .Error}}
<div class="alert alert-error">{{.Error}}</div>
{{end}}

<div class="admin-card">
    <form method="POST" action="{{if .IsNew}}/admin/articles{{else}}/admin/articles/{{.Article.ID}}{{end}}" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Název</label>
            <input type="text" id="title" name="title" value="{{.Article.Title}}" required>
        </div>

        <div class="form-group">
            <label for="slug">Webový identifikátor (slug)</label>
            <input type="text" id="slug" name="slug" value="{{.Article.Slug}}" required>
        </div>

        <div class="form-group">
            <label for="excerpt">Úryvek</label>
            <input type="text" id="excerpt" name="excerpt" value="{{.Article.Excerpt}}">
        </div>

        <div class="form-group">
            <label for="content">Obsah</label>
            <textarea id="content" name="content">{{.Article.Content}}</textarea>
        </div>

        <div class="form-group">
            <label for="cover_image">Titulní obrázek</label>
            {{if .Article.CoverImage}}
            <p style="margin-bottom: 0.5rem; color: var(--text-muted);">Aktuální: {{.Article.CoverImage}}</p>
            {{end}}
            <input type="file" id="cover_image" name="cover_image" accept="image/*">
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="published" {{if .Article.Published}}checked{{end}} style="width: auto;">
                Publikováno
            </label>
        </div>

        <button type="submit" class="btn">{{if .IsNew}}Vytvořit článek{{else}}Uložit článek{{end}}</button>
        <a href="/admin/articles" style="margin-left: 1rem; color: var(--text-muted);">Zrušit</a>
    </form>
</div>
{{end}}
