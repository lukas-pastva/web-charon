{{template "admin_base" .}}

{{define "title"}}{{if .IsNew}}Nový používateľ{{else}}Upraviť používateľa{{end}} - Charon Administrácia{{end}}

{{define "content"}}
<h1 class="admin-title">{{if .IsNew}}Nový používateľ{{else}}Upraviť používateľa{{end}}</h1>
<p class="admin-subtitle">{{if .IsNew}}Vytvorte nový účet pre prístup do administrácie. Používateľ sa bude prihlasovať svojou prezývkou a heslom.{{else}}Upravte údaje používateľa. Heslo vyplňte len ak ho chcete zmeniť.{{end}}</p>

{{if .Error}}
<div class="alert alert-error">{{.Error}}</div>
{{end}}

<div class="admin-card">
    <form method="POST" action="{{if .IsNew}}/admin/users{{else}}/admin/users/{{.User.ID}}{{end}}">
        <div class="form-group">
            <label for="nickname">Prezývka (prihlasovacie meno)</label>
            <span class="form-hint">Unikátne meno, ktoré používateľ zadáva pri prihlásení. Po vytvorení ho nie je možné zmeniť.</span>
            <input type="text" id="nickname" name="nickname" value="{{.User.Nickname}}" required>
        </div>

        <div class="form-group">
            <label for="name">Meno</label>
            <span class="form-hint">Voliteľné. Skutočné krstné meno používateľa.</span>
            <input type="text" id="name" name="name" value="{{.User.Name}}">
        </div>

        <div class="form-group">
            <label for="surname">Priezvisko</label>
            <span class="form-hint">Voliteľné. Skutočné priezvisko používateľa.</span>
            <input type="text" id="surname" name="surname" value="{{.User.Surname}}">
        </div>

        <div class="form-group">
            <label for="password">Heslo</label>
            <span class="form-hint">{{if .IsNew}}Zadajte heslo pre nový účet. Heslo by malo mať aspoň 6 znakov.{{else}}Ponechajte prázdne, ak nechcete meniť aktuálne heslo. Ak vyplníte, staré heslo sa nahradí novým.{{end}}</span>
            <input type="password" id="password" name="password" {{if .IsNew}}required{{end}}>
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="is_admin" {{if .User.IsAdmin}}checked{{end}} style="width: auto; min-height: auto; min-width: 20px; height: 20px;">
                Administrátor
            </label>
            <span class="form-hint">Administrátor má prístup k správe používateľov (vytváranie, mazanie účtov). Bežný používateľ môže spravovať len obsah webu.</span>
        </div>

        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; margin-top: 1.5rem;">
            <button type="submit" class="btn">{{if .IsNew}}Vytvoriť používateľa{{else}}Uložiť používateľa{{end}}</button>
            <a href="/admin/users" style="color: var(--text-muted);">Zrušiť a vrátiť sa späť</a>
        </div>
    </form>
</div>
{{end}}
