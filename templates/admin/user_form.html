{{template "admin_base" .}}

{{define "title"}}{{if .IsNew}}Nový uživatel{{else}}Upravit uživatele{{end}} - Charon Administrace{{end}}

{{define "content"}}
<h1 class="admin-title">{{if .IsNew}}Nový uživatel{{else}}Upravit uživatele{{end}}</h1>

{{if .Error}}
<div class="alert alert-error">{{.Error}}</div>
{{end}}

<div class="admin-card">
    <form method="POST" action="{{if .IsNew}}/admin/users{{else}}/admin/users/{{.User.ID}}{{end}}">
        <div class="form-group">
            <label for="nickname">Přezdívka (přihlašovací jméno)</label>
            <input type="text" id="nickname" name="nickname" value="{{.User.Nickname}}" required>
        </div>

        <div class="form-group">
            <label for="name">Jméno</label>
            <input type="text" id="name" name="name" value="{{.User.Name}}">
        </div>

        <div class="form-group">
            <label for="surname">Příjmení</label>
            <input type="text" id="surname" name="surname" value="{{.User.Surname}}">
        </div>

        <div class="form-group">
            <label for="password">Heslo{{if not .IsNew}} (ponechte prázdné pro zachování stávajícího){{end}}</label>
            <input type="password" id="password" name="password" {{if .IsNew}}required{{end}}>
        </div>

        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                <input type="checkbox" name="is_admin" {{if .User.IsAdmin}}checked{{end}} style="width: auto;">
                Administrátor
            </label>
        </div>

        <button type="submit" class="btn">{{if .IsNew}}Vytvořit uživatele{{else}}Uložit uživatele{{end}}</button>
        <a href="/admin/users" style="margin-left: 1rem; color: var(--text-muted);">Zrušit</a>
    </form>
</div>
{{end}}
